# 标签

## 工具
FreePic2Pdf
PdgCntEditor

## 从豆瓣提取现成目录
- 首先，格式化为 PdgCntEditor 所支持的页码表示法
即页码，跟名称，以一个制表符分隔，豆瓣提供的是以“空格”分隔，通过以下正则匹配（不包括单引号，注意空格，下同）：
```tex
' (\d+)$'
```
替换为：
```tex
'\t$1''
```
- 多级目录缩进
使用制表符缩进，二级缩进一位，三级两位，以此类推
    - 二级目录，“1.1 ”这种格式开头的替换规则：
```tex
'^(\d+\.\d+) '
```
替换为：
```tex
'\t$1 '
```
    - 三级目录，“1.1.1 ”这种格式开头的替换规则：
```tex
'^(\d+\.\d+\.\d+) '
```
替换为：
```tex
'\t\t$1 '
```
- 编辑第一页前的页码
用PDF阅读器打开，查看正文第一页，是PDF所有页中的第几页，然后正文前的书签的页码，就是其在PDF中的页码-正文第一页在PDF中的页码，例如正文第1页，是PDF的第22页，那封面的页码就是-21

格式大致如下
![Img](https://static.zhensheng.im/wp-content/uploads/2022/04/content.png)

## 编辑接口文件
运行FreePic2Pdf，点击右下角的“更改PDF”，然后切换到“从PDF取书签”，选择要编辑目录的PDF文件，然后点击开始，正常情况下，会显示“导出完成”：
![Img](https://static.zhensheng.im/wp-content/uploads/2022/04/%E5%AF%BC%E5%87%BA.png)
点击“2、存放接口文件的文件夹”右侧的“编辑书签”按钮（下图红圈处）：
![Img](https://static.zhensheng.im/wp-content/uploads/2022/04/edit.png)
把格式化后的目录文本，粘贴进去，然后点击左上角的保存按钮（下图红圈处）：
![Img](https://static.zhensheng.im/wp-content/uploads/2022/04/save-1.png)
点击“编辑接口文件”按钮：
![Img](https://static.zhensheng.im/wp-content/uploads/2022/04/edit-interface.png)
更改其中BasePage的值为书籍正文第一页在PDF中的页数：
![Img](https://static.zhensheng.im/wp-content/uploads/2022/04/edit-interface-base-page.png)
然后保存，关闭“编辑接口文件”的窗口。
退出其余打开了此PDF的程序，然后切换到“往PDF挂书签”标签，点击“开始”：
![Img](https://static.zhensheng.im/wp-content/uploads/2022/04/finish.png)
完成后，PDF即可得到一个内容完整、结构完好的书签：
![Img](https://static.zhensheng.im/wp-content/uploads/2022/04/adobe-reader-1.png)